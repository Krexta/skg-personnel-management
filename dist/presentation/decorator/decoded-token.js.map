{"version":3,"sources":["../../../src/presentation/decorator/decoded-token.ts"],"sourcesContent":["import {\n  createParamDecorator,\n  ExecutionContext,\n  UnauthorizedException,\n} from '@nestjs/common';\n\nimport { IDecodedToken } from '../../application/interface';\nimport { AuthorizedRequest } from '../guard';\n\nexport const CurrentDecodedToken = createParamDecorator(\n  (data: unknown, host: ExecutionContext): IDecodedToken => {\n    const ctx = host.switchToHttp();\n    const request = ctx.getRequest<AuthorizedRequest>();\n    if (!request.decodedToken) {\n      throw new UnauthorizedException('Token not found');\n    }\n    return request.decodedToken;\n  },\n);\n"],"names":["createParamDecorator","UnauthorizedException","CurrentDecodedToken","data","host","ctx","switchToHttp","request","getRequest","decodedToken"],"mappings":"AAAA,SACEA,oBAAoB,EAEpBC,qBAAqB,QAChB,iBAAiB;AAKxB,OAAO,MAAMC,sBAAsBF,qBACjC,CAACG,MAAeC;IACd,MAAMC,MAAMD,KAAKE,YAAY;IAC7B,MAAMC,UAAUF,IAAIG,UAAU;IAC9B,IAAI,CAACD,QAAQE,YAAY,EAAE;QACzB,MAAM,IAAIR,sBAAsB;IAClC;IACA,OAAOM,QAAQE,YAAY;AAC7B,GACA"}