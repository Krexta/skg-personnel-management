{"version":3,"sources":["../../../src/presentation/guard/authorization.strategy.ts"],"sourcesContent":["import { Injectable, NotImplementedException } from '@nestjs/common';\nimport { PassportStrategy } from '@nestjs/passport';\nimport { Strategy } from 'passport-http-bearer';\n\nimport { IDecodedToken } from '../../application/interface';\nimport { CustomLogger } from '../../utility';\n\nimport type { Request } from 'express';\n\nexport interface AuthorizedRequest extends Request {\n  decodedToken?: IDecodedToken;\n}\n\n@Injectable()\nexport class AuthorizationStrategy extends PassportStrategy(Strategy) {\n  constructor(readonly logger: CustomLogger) {\n    super({ passReqToCallback: true });\n    this.logger.setContext(AuthorizationStrategy.name);\n  }\n\n  async validate(req: AuthorizedRequest, token: string) {\n    throw new NotImplementedException({\n      message: 'AuthorizationStrategy not implement',\n      path: req.path,\n      method: req.method,\n      token,\n    });\n  }\n}\n"],"names":["Injectable","NotImplementedException","PassportStrategy","Strategy","CustomLogger","AuthorizationStrategy","validate","req","token","message","path","method","constructor","logger","passReqToCallback","setContext","name"],"mappings":";;;;;;;;;AAAA,SAASA,UAAU,EAAEC,uBAAuB,QAAQ,iBAAiB;AACrE,SAASC,gBAAgB,QAAQ,mBAAmB;AACpD,SAASC,QAAQ,QAAQ,uBAAuB;AAGhD,SAASC,YAAY,QAAQ,yBAAgB;AAS7C,OAAO,MAAMC,8BAA8BH,iBAAiBC;IAM1D,MAAMG,SAASC,GAAsB,EAAEC,KAAa,EAAE;QACpD,MAAM,IAAIP,wBAAwB;YAChCQ,SAAS;YACTC,MAAMH,IAAIG,IAAI;YACdC,QAAQJ,IAAII,MAAM;YAClBH;QACF;IACF;IAZAI,YAAY,AAASC,MAAoB,CAAE;QACzC,KAAK,CAAC;YAAEC,mBAAmB;QAAK,SADbD,SAAAA;QAEnB,IAAI,CAACA,MAAM,CAACE,UAAU,CAACV,sBAAsBW,IAAI;IACnD;AAUF"}